{"id":"st-02q","title":"Plan infra + deployment workflow (DO + GitHub Actions)","description":"dispatched_by: mayor\n\nGoal\n- Review available bd formulas (e.g., shiny, shiny-secure, shiny-enterprise) and map them to this project's deployment workflow.\n\nScope\n- Provisioning plan for a DigitalOcean droplet (networking, OS baseline, users/SSH, firewall, TLS).\n- CI/CD plan using GitHub Actions (build/test, deploy steps, secrets management, rollback).\n- Observability plan (logs, metrics, traces, alerting, dashboards) appropriate for a small streaming service.\n- Environment strategy (dev/staging/prod), config and secrets handling.\n\nDeliverables\n- A written plan (markdown) with recommended formula choice(s) and rationale.\n- Step-by-step setup + deploy checklist for initial bootstrap and ongoing releases.\n- Open questions and assumptions that need human decisions.","status":"closed","priority":2,"issue_type":"task","assignee":"streamer/crew/goon","created_at":"2026-01-19T01:07:14.698829+08:00","created_by":"mayor","updated_at":"2026-01-19T01:10:02.489666+08:00","closed_at":"2026-01-19T01:10:02.489666+08:00","close_reason":"Added INFRA_PLAN.md with infra/deploy plan","labels":["infra","plan"]}
{"id":"st-civ","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-19T00:43:41.528781+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:41.528781+08:00"}
{"id":"st-jjt","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-19T00:43:41.369623+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:41.369623+08:00"}
{"id":"st-mol-0qt","title":"Confirm environment parameters","description":"Decide the environment settings and deployment approach.\n\nCollect and confirm:\n- env (staging/production)\n- domain + tls_email\n- do_region + droplet_size\n- ssh_key_fingerprint\n- deploy_method (container/artifact)\n- udp_port_range for streaming\n- repo + branch\n- optional: stun_server, turn_config\n\nExit criteria: parameters are agreed and recorded in the issue or notes.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.723863+08:00","updated_at":"2026-01-19T09:38:08.723863+08:00","dependencies":[{"issue_id":"st-mol-0qt","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.725619+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-4d6","title":"mol-streamer-infra","description":"Infra + deployment workflow for the streamer server stack.\n\nThis formula provisions DigitalOcean infrastructure, hardens the host, deploys\ncustom C server code (including a UDP streaming service), configures TLS +\nreverse proxying, and wires CI/CD for automated deploys.\n\nNote: CI/CD may use the GitHub repo secret DIGITAL_OCEAN_KEY (DigitalOcean API\nkey) for provisioning and environment monitoring.\n","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-19T09:38:08.723038+08:00","updated_at":"2026-01-19T09:38:08.723038+08:00"}
{"id":"st-mol-4qz","title":"Set up CI/CD workflows","description":"Create GitHub Actions workflows for CI + deploy.\n\nInclude:\n- CI build/test\n- Deploy staging on main\n- Deploy production via manual gate/tag\n\nUse DIGITAL_OCEAN_KEY in workflows if automated provisioning or monitoring is\nrequired.\n\nExit criteria: workflows exist and secrets are wired.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.725017+08:00","updated_at":"2026-01-19T09:38:08.725017+08:00","dependencies":[{"issue_id":"st-mol-4qz","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.728541+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-4qz","depends_on_id":"st-mol-7xi","type":"blocks","created_at":"2026-01-19T09:38:08.73242+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-5aa","title":"Baseline OS hardening","description":"Harden the OS and access model.\n\nTasks:\n- Create deploy user with sudo\n- Disable root SSH and password auth\n- Enable unattended security updates\n- Ensure NTP is enabled\n\nExit criteria: SSH access is locked to keys and updates are enabled.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724283+08:00","updated_at":"2026-01-19T09:38:08.724283+08:00","dependencies":[{"issue_id":"st-mol-5aa","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.726713+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-5aa","depends_on_id":"st-mol-h8b","type":"blocks","created_at":"2026-01-19T09:38:08.730419+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-5ti","title":"Configure firewall rules","description":"Configure DO firewall + UFW with minimal openings.\n\nAllow:\n- TCP 22 from trusted IPs\n- TCP 80/443 for web + signaling\n- UDP 10000-20000 for WebRTC + custom UDP server\n\nDeny all else by default.\n\nExit criteria: firewall rules are active and validated.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724411+08:00","updated_at":"2026-01-19T09:38:08.724411+08:00","dependencies":[{"issue_id":"st-mol-5ti","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.727025+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-5ti","depends_on_id":"st-mol-5aa","type":"blocks","created_at":"2026-01-19T09:38:08.730752+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-7xi","title":"Configure reverse proxy and static hosting","description":"Configure TLS and proxying for the client + signaling.\n\nTasks:\n- Configure Caddy/Nginx for TLS on stream.winnowscout.com\n- Proxy WebSocket signaling\n- Serve static client assets\n\nExit criteria: HTTPS is valid and client loads correctly.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724891+08:00","updated_at":"2026-01-19T09:38:08.724891+08:00","dependencies":[{"issue_id":"st-mol-7xi","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.728238+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-7xi","depends_on_id":"st-mol-gio","type":"blocks","created_at":"2026-01-19T09:38:08.732083+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-9r2","title":"Deploy custom C server","description":"Build and deploy the custom C server (cube_server) as a systemd service.\n\nTasks:\n- Build from repo\n- Install binary and systemd unit\n- Configure /etc/cube-server/env\n- Enable and start service\n\nExit criteria: service is running and logs are healthy.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724652+08:00","updated_at":"2026-01-19T09:38:08.724653+08:00","dependencies":[{"issue_id":"st-mol-9r2","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.727636+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-9r2","depends_on_id":"st-mol-dad","type":"blocks","created_at":"2026-01-19T09:38:08.731415+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-dad","title":"Install runtime dependencies","description":"Install base packages for the custom C server stack.\n\nExamples:\n- build tools (gcc/clang, make, cmake)\n- GStreamer libs\n- libwebsockets\n- Caddy or Nginx\n\nExit criteria: required packages are installed and available.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724531+08:00","updated_at":"2026-01-19T09:38:08.724531+08:00","dependencies":[{"issue_id":"st-mol-dad","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.72733+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-dad","depends_on_id":"st-mol-5ti","type":"blocks","created_at":"2026-01-19T09:38:08.731082+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-e2x","title":"Validate end-to-end streaming","description":"Run smoke tests against the live system.\n\nValidate:\n- HTTPS + WebSocket signaling\n- WebRTC connectivity\n- UDP streaming service reachability\n- Basic playback in browser\n\nExit criteria: smoke tests pass and latency is acceptable.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.725256+08:00","updated_at":"2026-01-19T09:38:08.725256+08:00","dependencies":[{"issue_id":"st-mol-e2x","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.72914+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-e2x","depends_on_id":"st-mol-rm8","type":"blocks","created_at":"2026-01-19T09:38:08.733161+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-gio","title":"Deploy custom C UDP streaming service","description":"Build and deploy the custom UDP server as a systemd service.\n\nTasks:\n- Build UDP server binary\n- Install systemd unit\n- Bind to configured UDP port range\n\nExit criteria: UDP service is listening and reachable.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724772+08:00","updated_at":"2026-01-19T09:38:08.724772+08:00","dependencies":[{"issue_id":"st-mol-gio","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.727939+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-gio","depends_on_id":"st-mol-9r2","type":"blocks","created_at":"2026-01-19T09:38:08.731744+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-h8b","title":"Provision DigitalOcean infrastructure","description":"Provision the droplet and network baseline.\n\nTasks:\n- Create droplet in do_region with droplet_size\n- Attach SSH key by fingerprint\n- Assign reserved IP (if used)\n- Place droplet in a DO project\n\nIf automated, use DIGITAL_OCEAN_KEY via the DigitalOcean API:\nhttps://docs.digitalocean.com/reference/api/digitalocean/\n\nExit criteria: droplet is reachable via SSH and has a stable IP.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724147+08:00","updated_at":"2026-01-19T09:38:08.724147+08:00","dependencies":[{"issue_id":"st-mol-h8b","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.726389+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-h8b","depends_on_id":"st-mol-pyw","type":"blocks","created_at":"2026-01-19T09:38:08.730081+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-jp7","title":"Define rollback and runbook","description":"Document rollback and operational steps.\n\nInclude:\n- How to roll back (image tag or artifact swap)\n- Where logs live\n- How to restart services\n- Contact/escalation notes\n\nExit criteria: rollback steps are written and accessible.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.725372+08:00","updated_at":"2026-01-19T09:38:08.725372+08:00","dependencies":[{"issue_id":"st-mol-jp7","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.729452+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-jp7","depends_on_id":"st-mol-e2x","type":"blocks","created_at":"2026-01-19T09:38:08.73367+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-pyw","title":"Configure GitHub environment secrets","description":"Create GitHub Environments (staging/production) and store required secrets.\n\nMinimum secrets:\n- SSH_HOST, SSH_USER, SSH_KEY\n- DOMAIN, TLS_EMAIL\n- DIGITAL_OCEAN_KEY (DigitalOcean API key)\n- CLOUDFLARE_API_KEY (Cloudflare API token/key for DNS automation)\n- CS_STUN_SERVER, CS_TURN_* (if needed)\n\nExit criteria: secrets exist in the correct environments.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.724017+08:00","updated_at":"2026-01-19T09:38:08.724017+08:00","dependencies":[{"issue_id":"st-mol-pyw","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.726054+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-pyw","depends_on_id":"st-mol-0qt","type":"blocks","created_at":"2026-01-19T09:38:08.729755+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-mol-rm8","title":"Baseline observability","description":"Add basic logging + uptime checks.\n\nTasks:\n- Ensure journald logs are retained\n- Optional: node_exporter or simple metrics\n- Add uptime check for HTTPS endpoint\n\nExit criteria: logs are accessible and health checks are active.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T09:38:08.72514+08:00","updated_at":"2026-01-19T09:38:08.72514+08:00","dependencies":[{"issue_id":"st-mol-rm8","depends_on_id":"st-mol-4d6","type":"parent-child","created_at":"2026-01-19T09:38:08.728843+08:00","created_by":"streamer/crew/goon"},{"issue_id":"st-mol-rm8","depends_on_id":"st-mol-4qz","type":"blocks","created_at":"2026-01-19T09:38:08.732785+08:00","created_by":"streamer/crew/goon"}]}
{"id":"st-rig-streamer","title":"streamer","description":"Rig identity bead for streamer.\n\nrepo: git@github.com:MouseAndKeyboard/3d-streamer.git\nprefix: st\nstate: active","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-19T00:43:41.649048+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:41.649048+08:00","labels":["gt:rig"]}
{"id":"st-streamer-crew-goon","title":"Crew worker goon in streamer - human-managed persistent workspace.","description":"Crew worker goon in streamer - human-managed persistent workspace.\n\nrole_type: crew\nrig: streamer\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-19T01:00:12.932925+08:00","created_by":"mayor","updated_at":"2026-01-19T01:12:04.155066+08:00","labels":["gt:agent"]}
{"id":"st-streamer-crew-nef","title":"Crew worker nef in streamer - human-managed persistent workspace.","description":"Crew worker nef in streamer - human-managed persistent workspace.\n\nrole_type: crew\nrig: streamer\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-19T00:44:42.815872+08:00","created_by":"nef","updated_at":"2026-01-19T00:44:42.901126+08:00","labels":["gt:agent"]}
{"id":"st-streamer-refinery","title":"Refinery for streamer - processes merge queue.","description":"Refinery for streamer - processes merge queue.\n\nrole_type: refinery\nrig: streamer\nagent_state: idle\nhook_bead: null\nrole_bead: hq-refinery-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-19T00:43:40.887495+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:40.992121+08:00","labels":["gt:agent"]}
{"id":"st-streamer-witness","title":"Witness for streamer - monitors polecat health and progress.","description":"Witness for streamer - monitors polecat health and progress.\n\nrole_type: witness\nrig: streamer\nagent_state: idle\nhook_bead: null\nrole_bead: hq-witness-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","created_at":"2026-01-19T00:43:40.545405+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:40.649245+08:00","labels":["gt:agent"]}
{"id":"st-vbu","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"open","priority":2,"issue_type":"molecule","created_at":"2026-01-19T00:43:41.195331+08:00","created_by":"nef","updated_at":"2026-01-19T00:43:41.195331+08:00"}
